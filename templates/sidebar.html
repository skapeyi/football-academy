<!-- Collapsible sidebar with icon mode for tablets -->
<nav class="sidebar" id="sidebar">
    <div class="card">
        <div class="card-header text-white d-flex justify-content-between align-items-center">
            <span class="sidebar-title d-flex align-items-center">
                <i class="bi bi-trophy-fill"></i>
                <span class="sidebar-text">Milos Academy</span>
            </span>
            <!-- Toggle button for tablets (collapse to icons) -->
            <button class="btn btn-sm btn-outline-light d-none d-md-inline-block d-xl-none" type="button"
                id="sidebarToggle" aria-label="Toggle sidebar">
                <i class="bi bi-chevron-left" id="toggleIcon"></i>
            </button>
            <!-- Toggle button for mobile (show/hide menu) -->
            <button class="btn btn-sm btn-outline-light d-md-none" type="button"
                data-bs-toggle="collapse" data-bs-target="#sidebarMenu"
                aria-expanded="false" aria-controls="sidebarMenu">
                <i class="bi bi-chevron-down"></i>
            </button>
        </div>
        <div class="card-body p-0">
            <div class="collapse d-md-block" id="sidebarMenu">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item" data-title="Dashboard">
                        <a class="nav-link d-flex align-items-center" href="{% url 'account:home' %}" title="Dashboard">
                            <i class="bi bi-grid-1x2 sidebar-icon"></i>
                            <span class="sidebar-text">Dashboard</span>
                        </a>
                    </li>
                    <li class="list-group-item" data-title="Players">
                        <a class="nav-link d-flex align-items-center" href="{% url 'account:players' %}" title="Players">
                            <i class="bi bi-people-fill sidebar-icon"></i>
                            <span class="sidebar-text">Players</span>
                        </a>
                    </li>
                    <li class="list-group-item" data-title="Scheduling">
                        <a class="nav-link d-flex align-items-center" href="{% url 'account:scheduling' %}" title="Scheduling">
                            <i class="bi bi-calendar3 sidebar-icon"></i>
                            <span class="sidebar-text">Scheduling</span>
                        </a>
                    </li>
                    <li class="list-group-item" data-title="Parents/Caretakers">
                        <a class="nav-link d-flex align-items-center" href="{% url 'account:care-takers' %}" title="Parents/Caretakers">
                            <i class="bi bi-person-badge sidebar-icon"></i>
                            <span class="sidebar-text">Parents/Caretakers</span>
                        </a>
                    </li>
                    <li class="list-group-item sidebar-logout" data-title="Logout">
                        <form action="{% url 'account:logout' %}" method="post" class="d-flex align-items-center m-0 p-2">
                            {% csrf_token %}
                            <button class="btn btn-outline-danger btn-sm w-100 d-flex align-items-center justify-content-center"
                                type="submit" title="Logout">
                                <i class="bi bi-box-arrow-right sidebar-icon"></i>
                                <span class="sidebar-text">Logout</span>
                            </button>
                        </form>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</nav>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const sidebar = document.getElementById('sidebar');
    const toggleBtn = document.getElementById('sidebarToggle');
    const toggleIcon = document.getElementById('toggleIcon');

    // Check for saved state
    const isCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
    if (isCollapsed) {
        sidebar.classList.add('collapsed');
        toggleIcon.classList.replace('bi-chevron-left', 'bi-chevron-right');
    }

    if (toggleBtn) {
        toggleBtn.addEventListener('click', function() {
            sidebar.classList.toggle('collapsed');
            const collapsed = sidebar.classList.contains('collapsed');

            // Toggle icon direction
            if (collapsed) {
                toggleIcon.classList.replace('bi-chevron-left', 'bi-chevron-right');
            } else {
                toggleIcon.classList.replace('bi-chevron-right', 'bi-chevron-left');
            }

            // Save state
            localStorage.setItem('sidebarCollapsed', collapsed);
        });
    }

    // Highlight active nav item
    const currentPath = window.location.pathname;
    const navLinks = document.querySelectorAll('.sidebar .nav-link');
    navLinks.forEach(function(link) {
        if (link.getAttribute('href') === currentPath) {
            link.classList.add('active');
            link.closest('.list-group-item').classList.add('active');
        }
    });
});
</script>
